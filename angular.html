<!DOCTYPE html>
<html>
<head>
	<script type="text/javascript" src="js/lib/angular.min.js"></script>
	<script type="text/javascript" src="js/lib/angular-route.min.js"></script>
	<script type="text/javascript" src="js/lib/jquery-1.11.1.js"></script>
	<style type="text/css">

		body{
			margin: 0;
			padding: 0;
		}

	</style>
	<script type="text/javascript">

		var angularApp = angular.module("appName", ["ngRoute"]);

		angularApp.config(['$routeProvider',
		    function($routeProvider) {
		        $routeProvider
		            .when('/', {
		                templateUrl: 'template/login.html',
		                controller: 'loginViewCtrl'
		            })
		            .when('/home', {
		                templateUrl: 'template/home.html',
		                controller: 'homeViewCtrl'
		            })
		            .when('/about1', {
		                templateUrl: 'template/about.html',
		                controller: 'aboutViewCtrl'
		            })
		            .when('/contact1', {
		                templateUrl: 'template/contact.html',
		                controller: 'contactViewCtrl'
		            })
		            .when('/student', {
		                templateUrl: 'template/studentlist.html',
		                controller: 'studentViewCtrl'
		            })
		            .when('/student/:id', {
		                templateUrl: 'template/studentdetail.html',
		                controller: 'studentDetailViewCtrl'
		            })
		           }
		    ]);

		angularApp.controller("loginViewCtrl", ["$scope", function($scope){
			$("#navSection").hide();
		}])

		angularApp.controller("homeViewCtrl", ["$scope","$location", function($scope, $location){
			$("#navSection").show();
			$scope.message = "Welcome to Angular Js";
		}])

		angularApp.controller("aboutViewCtrl", ["$scope", function($scope){
			$("#navSection").show();
			$scope.message = "About message";
		}]);

		angularApp.controller("contactViewCtrl", ["$scope", function($scope){
			$("#navSection").show();
			$scope.message = "Contact message";
		}]);

		var studentList = [];
		angularApp.controller("studentViewCtrl", ["$scope", "$http", function($scope, $http){
			$("#navSection").show();
			$scope.message = "";
			$http.get("data/data.json")
			.success(function(result){
				$scope.message = "Student data loaded successfully.";
				$scope.students = result.student;
				studentList = result.student;
			})
			.error(function(err){
				$scope.message = "Unable to load student record(s). Please try again.";
			});
		}]);

		angularApp.controller("studentDetailViewCtrl", ["$scope", "$routeParams", function($scope, $routeParams){
			$("#navSection").show();
			for(var i = 0; i < studentList.length; i++){
				if(studentList[i].studentId == $routeParams.id){
					$scope.student = studentList[i];
					break;
				}
			}
		}]);

		angularApp.directive("login", [function(){
			return {
				restrict: "C", // E A C 
				templateUrl: "components/login.html",
				controller: "loginController"
			}
		}])

		angularApp.directive("custommessage", [function(){
			return {
				restrict: "E", // E A C 
				template: "<div>{{message}}</div>"
			}
		}])

		angularApp.controller("loginController", ["$scope", function($scope){
			$scope.usernamePlaceHolder = "Enter Username";
			$scope.passwordPlaceHolder = "Enter Password";
			$scope.username = "";
			$scope.password = "";
			$scope.login = function(){
				if($scope.username == "admin" && $scope.password == "password"){
					window.location.href = "#/home";
				}
				else{
					alert("Username and Password is invalid.");
				}
			}
		}]);

		angularApp.controller("navController", ["$scope", "$route", function($scope, $route){
			$scope.navLinks = false;
		}]);

	</script>
</head>

<body ng-app="appName">
	<table style="width:100%">
		<tr>
			<td id="headerSection" colspan="2" style="text-align:center; height:80px; background: #ff0000">
				Header content 123
			</td>
		</tr>	

		<tr id="mainSection">
			<td style="width:150px; vertical-align:top" id="navSection" style="display:none">
				<a href="#/home">Home</a>
				<br>
				<a href="#/about1">About</a>
				<br>
				<a href="#/contact1">Contact</a>
				<br>
				<a href="#/student">Student List</a>
			</td>
			<td style="vertical-align:top">
				<div id="mainDiv" ng-view></div>
			</td>
		</tr>

		<tr>
			<td id="footerSection" colspan="2" style="text-align:center; height:30px; background: #cccccc">
				Footer content
			</td>
		</tr>
	</table>

	<script type="text/javascript">
		$("#mainSection").height($(document).height()-$("#headerSection").height()-$("#footerSection").height() - 10);
	</script>
</body>
</html>